"use strict";(self.webpackChunkreact_admin=self.webpackChunkreact_admin||[]).push([[364],{7364:function(e,t,n){n.r(t),n.d(t,{default:function(){return w}});var o=n(5861),a=n(5671),r=n(3144),i=n(9340),s=n(8557),c=n(7757),u=n.n(c),d=n(7363),l=n(1821),h=n(1752),g=n(2622),f=n(5796),p=n(7467),m=n.n(p),v=n(184),y=l.Input.Search,x=l.Modal.confirm,w=function(e){(0,i.Z)(n,e);var t=(0,s.Z)(n);function n(){var e;(0,a.Z)(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).columns=[{title:"#",key:"index",render:function(e,t,n){return n+1}},{width:"45%",title:"\u5546\u54c1\u540d\u79f0",dataIndex:"goods_name",key:"goods_name"},{width:"10%",title:"\u5546\u54c1\u4ef7\u683c\uff08\u5143\uff09",dataIndex:"goods_price",key:"goods_price"},{width:"10%",title:"\u5546\u54c1\u91cd\u91cf\uff08\u514b\uff09",dataIndex:"goods_weight",key:"goods_weight"},{width:"15%",title:"\u521b\u5efa\u4e8b\u4ef6",key:"add_time",render:function(e,t){return new Date(t.add_time).toLocaleDateString()}},{width:"10%",title:"\u64cd\u4f5c",dataIndex:"operation",key:"operation",render:function(t,n){return(0,v.jsxs)(l.Space,{children:[(0,v.jsx)(l.Tooltip,{title:"\u4fee\u6539\u5546\u54c1",color:"blue",children:(0,v.jsx)(l.Button,{icon:(0,v.jsx)(h.Z,{}),className:"primaryStyle",onClick:function(){e.props.history.push("/goods/edit/".concat(n.goods_id))}})}),(0,v.jsx)(l.Tooltip,{title:"\u5220\u9664\u5546\u54c1",color:"red",children:(0,v.jsx)(l.Button,{icon:(0,v.jsx)(g.Z,{}),className:"dangerStyle",onClick:function(){e.showRemoveGoodConfirm(n.goods_id)}})})]})}}],e.state={queryInfo:{query:"",pagenum:1,pagesize:10},goodList:[],goodTotal:0,removeGoodConfirmVisible:!1,loading:!1},e.getGoodList=(0,o.Z)(u().mark((function t(){var n,o;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0}),t.prev=1,t.next=4,m().get("goods",{params:e.state.queryInfo});case 4:if(n=t.sent,200===(o=n.data).meta.status){t.next=8;break}return t.abrupt("return",l.message.error("\u83b7\u53d6\u5546\u54c1\u5931\u8d25\uff01"));case 8:e.setState({goodList:o.data.goods,goodTotal:o.data.total,loading:!1}),t.next=14;break;case 11:return t.prev=11,t.t0=t.catch(1),t.abrupt("return",l.message.error("\u7f51\u7edc\u51fa\u9519\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5\uff01"));case 14:case"end":return t.stop()}}),t,null,[[1,11]])}))),e.resetSearch=function(t){""===t.target.value&&(e.state.queryInfo.query="",e.getGoodList())},e.searchGood=function(t){e.state.queryInfo.query=t,e.getGoodList()},e.removeGoodById=function(){var t=(0,o.Z)(u().mark((function t(n){var o;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,m().delete("goods/".concat(n));case 3:if(o=t.sent,200===o.data.meta.status){t.next=7;break}return t.abrupt("return",l.message.error("\u5220\u9664\u5546\u54c1\u5931\u8d25\uff01"));case 7:l.message.success("\u5220\u9664\u5546\u54c1\u6210\u529f\uff01"),e.getGoodList(),t.next=14;break;case 11:return t.prev=11,t.t0=t.catch(0),t.abrupt("return",l.message.error("\u7f51\u7edc\u51fa\u9519\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5\uff01"));case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}(),e.onPageChange=function(t,n){e.state.queryInfo.pagenum=t,e.state.queryInfo.pagesize=n,e.getGoodList()},e.showRemoveGoodConfirm=function(t){x({title:"\u63d0\u793a",icon:(0,v.jsx)(f.Z,{}),content:"\u8be5\u64cd\u4f5c\u4f1a\u5220\u9664\u8be5\u5546\u54c1\uff0c\u662f\u5426\u7ee7\u7eed?",onOk:function(){e.removeGoodById(t)},onCancel:function(){l.message.info("\u5df2\u53d6\u6d88\u5220\u9664\uff01")}})},e}return(0,r.Z)(n,[{key:"componentDidMount",value:function(){this.getGoodList()}},{key:"render",value:function(){var e=this;return(0,v.jsx)(v.Fragment,{children:(0,v.jsxs)(l.Space,{direction:"vertical",children:[(0,v.jsxs)(l.Space,{children:[(0,v.jsx)(y,{placeholder:"\u8bf7\u8f93\u5165\u5546\u54c1\u540d",size:"large",allowClear:!0,onChange:this.resetSearch,onSearch:this.searchGood}),(0,v.jsx)(l.Button,{type:"primary",size:"large",onClick:function(){e.props.history.push("/goods/add")},children:"\u6dfb\u52a0\u5546\u54c1"})]}),(0,v.jsx)(l.Table,{loading:this.state.loading,pagination:{position:["none"]},bordered:!0,columns:this.columns,dataSource:this.state.goodList,rowKey:function(e){return e.goods_id}}),(0,v.jsx)(l.Pagination,{total:this.state.goodTotal,current:this.state.queryInfo.pagenum,size:"large",pageSizeOptions:[1,2,5,10],defaultPageSize:this.state.queryInfo.pagesize,showSizeChanger:!0,onChange:this.onPageChange,showQuickJumper:!0,showTotal:function(e){return"\u5171 ".concat(e," \u6761")}})]})})}}]),n}(d.Component)},2622:function(e,t,n){n.d(t,{Z:function(){return c}});var o=n(1413),a=n(7363),r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"},i=n(2006),s=function(e,t){return a.createElement(i.Z,(0,o.Z)((0,o.Z)({},e),{},{ref:t,icon:r}))};s.displayName="DeleteOutlined";var c=a.forwardRef(s)},1752:function(e,t,n){n.d(t,{Z:function(){return c}});var o=n(1413),a=n(7363),r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"},i=n(2006),s=function(e,t){return a.createElement(i.Z,(0,o.Z)((0,o.Z)({},e),{},{ref:t,icon:r}))};s.displayName="EditOutlined";var c=a.forwardRef(s)},5796:function(e,t,n){n.d(t,{Z:function(){return c}});var o=n(1413),a=n(7363),r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"},i=n(2006),s=function(e,t){return a.createElement(i.Z,(0,o.Z)((0,o.Z)({},e),{},{ref:t,icon:r}))};s.displayName="ExclamationCircleOutlined";var c=a.forwardRef(s)}}]);
//# sourceMappingURL=364.2c0a7916.chunk.js.map