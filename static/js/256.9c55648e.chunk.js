/*! For license information please see 256.9c55648e.chunk.js.LICENSE.txt */
(self.webpackChunkreact_admin=self.webpackChunkreact_admin||[]).push([[256],{3810:function(e,t,a){"use strict";a.d(t,{Z:function(){return m}});var n=a(1413),r=a(5671),i=a(3144),s=a(9340),o=a(8557),d=a(8489),l=a.n(d),c=a(7363),u=a(184),m=function(e){(0,s.Z)(a,e);var t=(0,o.Z)(a);function a(){return(0,r.Z)(this,a),t.apply(this,arguments)}return(0,i.Z)(a,[{key:"render",value:function(){return(0,u.jsx)(l(),(0,n.Z)((0,n.Z)({},this.props),{},{modules:a.modules,formats:a.formats}))}}]),a}(c.Component);m.formats=["header","font","size","bold","italic","underline","strike","blockquote","list","bullet","indent","link","image","video"],m.modules={toolbar:[[{font:[]}],[{size:[]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["link","image","video"],["clean"]],clipboard:{matchVisual:!1}}},1256:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return C}});var n=a(2982),r=a(1413),i=a(5861),s=a(5671),o=a(3144),d=a(9340),l=a(8557),c=a(7757),u=a.n(c),m=a(7363),p=a.n(m),h=a(1821),f={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"},g=a(2006),v=function(e,t){return m.createElement(g.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:t,icon:f}))};v.displayName="UploadOutlined";var b=m.forwardRef(v),x=a(7467),y=a.n(x),w=a(3810),j=a(6711),_=a(4038),k=a(184),F=h.Steps.Step,S=h.Tabs.TabPane,C=function(e){(0,d.Z)(a,e);var t=(0,l.Z)(a);function a(){var e;(0,s.Z)(this,a);for(var o=arguments.length,d=new Array(o),l=0;l<o;l++)d[l]=arguments[l];return(e=t.call.apply(t,[this].concat(d))).addGoodFormRef=p().createRef(),e.addGoodFormRules={goods_name:[{required:!0,message:"\u8bf7\u8f93\u5165\u5546\u54c1\u540d\u79f0"}],goods_price:[{required:!0,message:"\u8bf7\u8f93\u5165\u4e00\u7ec4\u6570\u5b57"}],goods_weight:[{required:!0,message:"\u8bf7\u8f93\u4e00\u7ec4\u6570\u5b57"}],goods_number:[{required:!0,message:"\u8bf7\u8f93\u5165\u4e00\u7ec4\u6570\u5b57"}],goods_cat:[{required:!0,message:"\u8bf7\u9009\u62e9\u5546\u54c1\u5206\u7c7b\uff0c\u76ee\u524d\u4ec5\u53ea\u652f\u6301\u4e09\u7ea7\u5206\u7c7b"}]},e.state={currentStepAndTab:0,uploadURL:"http://127.0.0.1:8888/api/private/v1/upload",headerObj:{Authorization:window.sessionStorage.getItem("token")},addGoodForm:{goods_name:"",goods_price:1,goods_weight:1,goods_number:1,goods_cat:[],pics:[],goods_introduce:"",attrs:[]},defaultDynamicParams:[],defaultStaticAttributes:[],checkedDynamicParams:[],inputStaticAttributes:[],cateList:[],imgPreviewModalVisible:!1,imgPreviewModalTitle:"\u56fe\u7247\u9884\u89c8",imgPreviewUrl:""},e.onTabClick=function(t){e.addGoodFormRef.current.validateFields().then((function(){1===+t?e.getDefaultDynamicParams():2===+t&&e.getDefaultStaticAttributes(),e.setState({currentStepAndTab:+t})})).catch((function(){return h.message.error("\u8bf7\u5148\u5b8c\u6210\u57fa\u672c\u4fe1\u606f\u7684\u586b\u5199")}))},e.handleChange=function(t){var a=t.file;if("done"===a.status)return e.handleSuccess(a.response),h.message.success("\u56fe\u7247\u4e0a\u4f20\u6210\u529f")},e.handleSuccess=function(t){var a={pic:t.data.tmp_path};e.state.addGoodForm.pics.push(a)},e.handleRemove=function(t){var a=t.response.data.tmp_path,n=e.state.addGoodForm.pics.findIndex((function(e){return e.pic===a}));return 0!==e.state.addGoodForm.pics.splice(n,1).length||h.message.error("\u5220\u9664\u5931\u8d25\uff01")},e.handlePreview=function(t){e.setState({imgPreviewModalVisible:!0,imgPreviewModalTitle:t.name,imgPreviewUrl:t.response.data.url})},e.getCateList=(0,i.Z)(u().mark((function t(){var a,n;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,y().get("categories");case 3:if(a=t.sent,200===(n=a.data).meta.status){t.next=7;break}return t.abrupt("return",h.message.error("\u83b7\u53d6\u5546\u54c1\u5206\u7c7b\u5217\u8868\u5931\u8d25\uff01"));case 7:e.setState({cateList:n.data}),t.next=13;break;case 10:return t.prev=10,t.t0=t.catch(0),t.abrupt("return",h.message.error("\u7f51\u7edc\u51fa\u9519\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5\uff01"));case 13:case"end":return t.stop()}}),t,null,[[0,10]])}))),e.getDefaultDynamicParams=(0,i.Z)(u().mark((function t(){var a,n,r,i;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=e.addGoodFormRef.current.getFieldValue("goods_cat"),n=3===a.length?a[2]+0:null,t.next=5,y().get("categories/".concat(n,"/attributes"),{params:{sel:"many"}});case 5:if(r=t.sent,200===(i=r.data).meta.status){t.next=9;break}return t.abrupt("return",h.message.error("\u83b7\u53d6\u52a8\u6001\u53c2\u6570\u5217\u8868\u5931\u8d25\uff01"));case 9:i.data.forEach((function(e){e.attr_vals=0===e.attr_vals.length?[]:e.attr_vals.split(",")})),e.setState({defaultDynamicParams:i.data}),t.next=16;break;case 13:return t.prev=13,t.t0=t.catch(0),t.abrupt("return",h.message.error("\u7f51\u7edc\u51fa\u9519\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5\uff01"));case 16:case"end":return t.stop()}}),t,null,[[0,13]])}))),e.updateCheckedDynamicParams=function(t,a,n){e.state.checkedDynamicParams[a]={attr_id:n,attr_value:t.join(",")}},e.getDefaultStaticAttributes=(0,i.Z)(u().mark((function t(){var a,n,r,i;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=e.addGoodFormRef.current.getFieldValue("goods_cat"),n=3===a.length?a[2]+0:null,t.next=5,y().get("categories/".concat(n,"/attributes"),{params:{sel:"only"}});case 5:if(r=t.sent,200===(i=r.data).meta.status){t.next=9;break}return t.abrupt("return",h.message.error("\u83b7\u53d6\u9759\u6001\u5c5e\u6027\u5217\u8868\u5931\u8d25\uff01"));case 9:i.data.forEach((function(t,a){e.state.inputStaticAttributes[a]={attr_id:t.attr_id,attr_value:t.attr_vals}})),e.setState({defaultStaticAttributes:i.data}),t.next=16;break;case 13:return t.prev=13,t.t0=t.catch(0),t.abrupt("return",h.message.error("\u7f51\u7edc\u51fa\u9519\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5\uff01"));case 16:case"end":return t.stop()}}),t,null,[[0,13]])}))),e.updateInputStaticAttributes=function(t,a,n){e.state.inputStaticAttributes[n]={attr_id:a,attr_value:t}},e.addGood=function(){var t=(0,i.Z)(u().mark((function t(a){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.addGoodFormRef.current.validateFields().then(function(){var t=(0,i.Z)(u().mark((function t(a){var i;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a.goods_cat=a.goods_cat.join(","),t.next=4,y().post("goods",(0,r.Z)((0,r.Z)({},a),{},{pics:e.state.addGoodForm.pics,attrs:[].concat((0,n.Z)(e.state.inputStaticAttributes),(0,n.Z)(e.state.checkedDynamicParams))}));case 4:if(i=t.sent,201===i.data.meta.status){t.next=8;break}return t.abrupt("return",h.message.error("\u6dfb\u52a0\u5546\u54c1\u5931\u8d25\uff01"));case 8:h.message.success("\u6dfb\u52a0\u5546\u54c1\u6210\u529f\uff01"),e.props.history.push("/goods"),t.next=15;break;case 12:return t.prev=12,t.t0=t.catch(0),t.abrupt("return",h.message.error(t.t0.message));case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}()).catch((function(){}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return(0,o.Z)(a,[{key:"componentDidMount",value:function(){this.getCateList()}},{key:"render",value:function(){var e=this;return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(h.Space,{direction:"vertical",size:"large",children:[(0,k.jsx)(h.Alert,{banner:!0,message:(0,k.jsx)(_.Z,{pauseOnHover:!0,gradient:!1,children:"\u76ee\u524d\u5546\u54c1\u56fe\u7247\u4e0a\u4f20\u529f\u80fd\u5df2\u505c\u7528\uff0c\u5982\u9700\u4f53\u9a8c\u8be5\u529f\u80fd\u5728\u672c\u5730\u670d\u52a1\u5668\u8fd0\u884c\u672c\u9879\u76ee\u5373\u53ef\u3002"})}),(0,k.jsx)(h.Alert,{type:"info",message:"\u6dfb\u52a0\u5546\u54c1\u4fe1\u606f",className:"tc"}),(0,k.jsxs)(h.Steps,{current:this.state.currentStepAndTab,status:"process",children:[(0,k.jsx)(F,{title:"\u57fa\u672c\u4fe1\u606f"}),(0,k.jsx)(F,{title:"\u5546\u54c1\u53c2\u6570"}),(0,k.jsx)(F,{title:"\u5546\u54c1\u5c5e\u6027"}),(0,k.jsx)(F,{title:"\u5546\u54c1\u56fe\u7247"}),(0,k.jsx)(F,{title:"\u5546\u54c1\u5185\u5bb9"}),(0,k.jsx)(F,{title:"\u5b8c\u6210"})]}),(0,k.jsx)(h.Form,{ref:this.addGoodFormRef,initialValues:this.state.addGoodForm,children:(0,k.jsxs)(h.Tabs,{tabPosition:"left",onTabClick:this.onTabClick,activeKey:this.state.currentStepAndTab+"",children:[(0,k.jsxs)(S,{tab:"\u57fa\u672c\u4fe1\u606f",children:[(0,k.jsx)(h.Form.Item,{label:"\u5546\u54c1\u540d\u79f0",name:"goods_name",rules:this.addGoodFormRules.goods_name,children:(0,k.jsx)(h.Input,{})}),(0,k.jsx)(h.Form.Item,{label:"\u5546\u54c1\u4ef7\u683c",name:"goods_price",rules:this.addGoodFormRules.goods_price,children:(0,k.jsx)(h.InputNumber,{min:"1",keyboard:!0,addonBefore:"\uffe5",addonAfter:"RMB",className:"w100p"})}),(0,k.jsx)(h.Form.Item,{label:"\u5546\u54c1\u91cd\u91cf",name:"goods_weight",rules:this.addGoodFormRules.goods_weight,children:(0,k.jsx)(h.InputNumber,{min:"1",keyboard:!0,addonAfter:"\u514b",className:"w100p"})}),(0,k.jsx)(h.Form.Item,{label:"\u5546\u54c1\u6570\u91cf",name:"goods_number",rules:this.addGoodFormRules.goods_number,children:(0,k.jsx)(h.InputNumber,{min:"1",keyboard:!0,addonAfter:"\u4e2a",className:"w100p"})}),(0,k.jsx)(h.Form.Item,{label:"\u5546\u54c1\u5206\u7c7b",name:"goods_cat",rules:this.addGoodFormRules.goods_cat,normalize:function(e){return 3===e.length?e:[]},children:(0,k.jsx)(h.Cascader,{placeholder:"\u8bf7\u9009\u62e9",expandTrigger:"hover",fieldNames:{label:"cat_name",value:"cat_id",children:"children"},options:this.state.cateList})})]},0),(0,k.jsx)(S,{tab:"\u5546\u54c1\u53c2\u6570",children:0===this.state.defaultDynamicParams.length?(0,k.jsx)(h.Empty,{description:"\u8be5\u5546\u54c1\u7c7b\u522b\u76ee\u524d\u6682\u65e0\u52a8\u6001\u53c2\u6570\uff0c\u53ef\u53bb\u5206\u7c7b\u53c2\u6570\u680f\u76ee\u5148\u521b\u5efa",children:(0,k.jsx)(j.Link,{to:"/params",children:"\u70b9\u6211\u8df3\u8f6c"})}):this.state.defaultDynamicParams.map((function(t,a){return(0,k.jsx)(h.Form.Item,{label:t.attr_name,labelCol:{span:24},children:(0,k.jsx)(h.Checkbox.Group,{className:"w100p",onChange:function(n){e.updateCheckedDynamicParams(n,a,t.attr_id)},children:(0,k.jsx)(h.Row,{children:t.attr_vals.map((function(e,t){return(0,k.jsx)(h.Col,{span:8,children:(0,k.jsx)(h.Checkbox,{value:e,className:".m10",children:e},t)},t)}))},t.attr_id)},t.attr_id)},t.attr_id)}))},1),(0,k.jsx)(S,{tab:"\u5546\u54c1\u5c5e\u6027",children:0===this.state.defaultStaticAttributes.length?(0,k.jsx)(h.Empty,{description:"\u8be5\u5546\u54c1\u7c7b\u522b\u76ee\u524d\u6682\u65e0\u9759\u6001\u5c5e\u6027\uff0c\u53ef\u53bb\u5206\u7c7b\u53c2\u6570\u680f\u76ee\u5148\u521b\u5efa",children:(0,k.jsx)(j.Link,{to:"/params",children:"\u70b9\u6211\u8df3\u8f6c"})}):this.state.defaultStaticAttributes.map((function(t,a){return(0,k.jsx)(h.Form.Item,{labelCol:{span:6},label:t.attr_name,children:(0,k.jsx)(h.Input,{defaultValue:t.attr_vals,onChange:function(n){e.updateInputStaticAttributes(n.target.value,t.attr_id,a)}})},t.attr_id)}))},2),(0,k.jsx)(S,{tab:"\u5546\u54c1\u56fe\u7247",children:(0,k.jsx)(h.Upload,{disabled:!0,multiple:!0,headers:this.state.headerObj,action:this.state.uploadURL,className:"upload-list-inline",listType:"picture",onPreview:this.handlePreview,onChange:this.handleChange,onRemove:this.handleRemove,children:(0,k.jsx)(h.Button,{icon:(0,k.jsx)(b,{}),type:"primary",disabled:!0,children:"\u4e0a\u4f20\u56fe\u7247"})})},3),(0,k.jsxs)(S,{tab:"\u5546\u54c1\u4ecb\u7ecd",children:[(0,k.jsx)(h.Form.Item,{name:"goods_introduce",children:(0,k.jsx)(w.Z,{placeholder:"\u5199\u4e9b\u4ecb\u7ecd\u5427..."})}),(0,k.jsx)(h.Button,{onClick:this.addGood,type:"primary",size:"large",children:"\u786e\u8ba4\u6dfb\u52a0"})]},4)]})})]}),(0,k.jsx)(h.Modal,{title:this.state.imgPreviewModalTitle,visible:this.state.imgPreviewModalVisible,footer:null,onCancel:function(){e.setState({imgPreviewModalVisible:!1})},children:(0,k.jsx)("img",{src:this.state.imgPreviewUrl,width:"100%"})})]})}}]),a}(m.Component)},4038:function(e,t,a){var n=a(7363);function r(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var i=r(n),s=function(){return s=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},s.apply(this,arguments)};!function(e){if(e&&"undefined"!==typeof window){var t=document.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e,document.head.appendChild(t)}}('.marquee-container {\n  overflow-x: hidden !important;\n  display: flex !important;\n  flex-direction: row !important;\n  position: relative;\n  width: 100%;\n}\n.marquee-container:hover div {\n  animation-play-state: var(--pause-on-hover);\n}\n.marquee-container:active div {\n  animation-play-state: var(--pause-on-click);\n}\n\n.overlay {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n}\n.overlay::before, .overlay::after {\n  background: linear-gradient(to right, var(--gradient-color));\n  content: "";\n  height: 100%;\n  position: absolute;\n  width: var(--gradient-width);\n  z-index: 2;\n}\n.overlay::after {\n  right: 0;\n  top: 0;\n  transform: rotateZ(180deg);\n}\n.overlay::before {\n  left: 0;\n  top: 0;\n}\n\n.marquee {\n  flex: 0 0 auto;\n  min-width: 100%;\n  z-index: 1;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  animation: scroll var(--duration) linear var(--delay) var(--iteration-count);\n  animation-play-state: var(--play);\n  animation-delay: var(--delay);\n  animation-direction: var(--direction);\n}\n@keyframes scroll {\n  0% {\n    transform: translateX(0%);\n  }\n  100% {\n    transform: translateX(-100%);\n  }\n}');t.Z=function(e){var t,a,r,o,d=e.style,l=void 0===d?{}:d,c=e.className,u=void 0===c?"":c,m=e.play,p=void 0===m||m,h=e.pauseOnHover,f=void 0!==h&&h,g=e.pauseOnClick,v=void 0!==g&&g,b=e.direction,x=void 0===b?"left":b,y=e.speed,w=void 0===y?20:y,j=e.delay,_=void 0===j?0:j,k=e.loop,F=void 0===k?0:k,S=e.gradient,C=void 0===S||S,P=e.gradientColor,Z=void 0===P?[255,255,255]:P,A=e.gradientWidth,R=void 0===A?200:A,G=e.onFinish,I=e.onCycleComplete,N=e.children,D=n.useState(0),E=D[0],T=D[1],q=n.useState(0),L=q[0],M=q[1],V=n.useState(0),z=V[0],O=V[1],B=n.useState(!1),U=B[0],H=B[1],X=n.useRef(null),K=n.useRef(null),W=function(){K.current&&X.current&&(T(X.current.getBoundingClientRect().width),M(K.current.getBoundingClientRect().width)),O(L<E?E/w:L/w)};n.useEffect((function(){return W(),window.addEventListener("resize",W),function(){window.removeEventListener("resize",W)}})),n.useEffect((function(){H(!0)}),[]);var J="rgba("+Z[0]+", "+Z[1]+", "+Z[2];return i.default.createElement(n.Fragment,null,U?i.default.createElement("div",{ref:X,style:s(s({},l),(t={},t["--pause-on-hover"]=f?"paused":"running",t["--pause-on-click"]=v?"paused":"running",t)),className:u+" marquee-container"},C&&i.default.createElement("div",{style:(a={},a["--gradient-color"]=J+", 1), "+J+", 0)",a["--gradient-width"]="number"===typeof R?R+"px":R,a),className:"overlay"}),i.default.createElement("div",{ref:K,style:(r={},r["--play"]=p?"running":"paused",r["--direction"]="left"===x?"normal":"reverse",r["--duration"]=z+"s",r["--delay"]=_+"s",r["--iteration-count"]=F?""+F:"infinite",r),className:"marquee",onAnimationIteration:I,onAnimationEnd:G},N),i.default.createElement("div",{style:(o={},o["--play"]=p?"running":"paused",o["--direction"]="left"===x?"normal":"reverse",o["--duration"]=z+"s",o["--delay"]=_+"s",o["--iteration-count"]=F?""+F:"infinite",o),className:"marquee"},N)):null)}}}]);
//# sourceMappingURL=256.9c55648e.chunk.js.map