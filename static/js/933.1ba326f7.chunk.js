"use strict";(self.webpackChunkreact_admin=self.webpackChunkreact_admin||[]).push([[933],{2933:function(e,t,a){a.r(t),a.d(t,{default:function(){return N}});var n=a(5861),r=a(5671),s=a(3144),c=a(9340),i=a(8557),o=a(7757),l=a.n(o),d=a(7363),u=a.n(d),f=a(1821),m=a(1413),h={icon:function(e,t){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm288.5 682.8L277.7 224C258 240 240 258 224 277.7l522.8 522.8C682.8 852.7 601 884 512 884c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372c0 89-31.3 170.8-83.5 234.8z",fill:e}},{tag:"path",attrs:{d:"M512 140c-205.4 0-372 166.6-372 372s166.6 372 372 372c89 0 170.8-31.3 234.8-83.5L224 277.7c16-19.7 34-37.7 53.7-53.7l522.8 522.8C852.7 682.8 884 601 884 512c0-205.4-166.6-372-372-372z",fill:t}}]}},name:"stop",theme:"twotone"},p=a(2006),g=function(e,t){return d.createElement(p.Z,(0,m.Z)((0,m.Z)({},e),{},{ref:t,icon:h}))};g.displayName="StopTwoTone";var C=d.forwardRef(g),v={icon:function(e,t){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z",fill:e}},{tag:"path",attrs:{d:"M512 140c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm193.4 225.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.3 0 19.9 5 25.9 13.3l71.2 98.8 157.2-218c6-8.4 15.7-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.4 12.7z",fill:t}},{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z",fill:e}}]}},name:"check-circle",theme:"twotone"},x=function(e,t){return d.createElement(p.Z,(0,m.Z)((0,m.Z)({},e),{},{ref:t,icon:v}))};x.displayName="CheckCircleTwoTone";var w=d.forwardRef(x),b={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h720c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"minus",theme:"outlined"},k=function(e,t){return d.createElement(p.Z,(0,m.Z)((0,m.Z)({},e),{},{ref:t,icon:b}))};k.displayName="MinusOutlined";var y=d.forwardRef(k),_={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"}}]},name:"down",theme:"outlined"},Z=function(e,t){return d.createElement(p.Z,(0,m.Z)((0,m.Z)({},e),{},{ref:t,icon:_}))};Z.displayName="DownOutlined";var M=d.forwardRef(Z),j={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M765.7 486.8L314.9 134.7A7.97 7.97 0 00302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 000-50.4z"}}]},name:"right",theme:"outlined"},F=function(e,t){return d.createElement(p.Z,(0,m.Z)((0,m.Z)({},e),{},{ref:t,icon:j}))};F.displayName="RightOutlined";var R=d.forwardRef(F),z=a(5796),S=a(7467),L=a.n(S),I=a(184),T=f.Modal.confirm,N=function(e){(0,c.Z)(a,e);var t=(0,i.Z)(a);function a(){var e;(0,r.Z)(this,a);for(var s=arguments.length,c=new Array(s),i=0;i<s;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).columns=[{width:"20%",title:"#",key:"index",render:function(e,t,a){return a+1}},{width:"30%",title:"\u5206\u7c7b\u540d\u79f0",key:"cat_name",dataIndex:"cat_name"},{width:"15%",title:"\u662f\u5426\u6709\u6548",key:"cat_deleted",render:function(e,t){return t.cat_deleted?(0,I.jsx)(C,{twoToneColor:"red"}):(0,I.jsx)(w,{twoToneColor:"#11dc0d"})}},{width:"10%",title:"\u6392\u5e8f",key:"order",render:function(e,t){return 0===t.cat_level?(0,I.jsx)(f.Tag,{color:"blue",children:"\u4e00\u7ea7"}):1===t.cat_level?(0,I.jsx)(f.Tag,{color:"green",children:"\u4e8c\u7ea7"}):2===t.cat_level?(0,I.jsx)(f.Tag,{color:"orange",children:"\u4e09\u7ea7"}):void 0}},{title:"\u64cd\u4f5c",key:"operation",render:function(t,a){return(0,I.jsxs)(f.Space,{children:[(0,I.jsx)(f.Button,{className:"primaryStyle",onClick:function(){e.showEditCateModal(a)},children:"\u7f16\u8f91"}),(0,I.jsx)(f.Button,{className:"dangerStyle",onClick:function(){e.showRemoveCateConfirm(a.cat_id)},children:"\u5220\u9664"})]})}}],e.addCateFormRef=u().createRef(),e.editCateFormRef=u().createRef(),e.addCateFormRules={cat_name:[{required:!0,message:"\u8bf7\u8f93\u5165\u5546\u54c1\u540d\u79f0"}]},e.state={cateList:[],parentCateList:[],queryInfo:{type:3,pagenum:1,pagesize:5},cateTotal:0,addCateModalVisible:!1,editCateModalVisible:!1,editCateForm:{cat_name:"",cat_id:""},loading:!1},e.onPageChange=function(t,a){e.state.queryInfo.pagenum=t,e.state.queryInfo.pagesize=a,e.getCateList()},e.showAddCateModal=function(){e.getParentCateList(),e.setState({addCateModalVisible:!0})},e.showEditCateModal=function(t){e.setState({editCateForm:{cat_name:t.cat_name,cat_id:t.cat_id},editCateModalVisible:!0})},e.showRemoveCateConfirm=function(t){T({title:"\u63d0\u793a",icon:(0,I.jsx)(z.Z,{}),content:"\u8be5\u64cd\u4f5c\u4f1a\u5220\u9664\u8be5\u5206\u7c7b\u53ca\u5176\u5b50\u7ea7\u5206\u7c7b\uff0c\u662f\u5426\u7ee7\u7eed?",onOk:function(){e.removeCateById(t)},onCancel:function(){f.message.info("\u5df2\u53d6\u6d88\u5220\u9664\uff01")}})},e.getCateList=(0,n.Z)(l().mark((function t(){var a,n;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0}),t.prev=1,t.next=4,L().get("categories",{params:e.state.queryInfo});case 4:if(a=t.sent,200===(n=a.data).meta.status){t.next=8;break}return t.abrupt("return",f.message.error("\u83b7\u53d6\u5546\u54c1\u5206\u7c7b\u5217\u8868\u5931\u8d25\uff01"));case 8:e.setState({cateList:n.data.result,cateTotal:n.data.total,loading:!1}),t.next=14;break;case 11:return t.prev=11,t.t0=t.catch(1),t.abrupt("return",f.message.error("\u7f51\u7edc\u51fa\u9519\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5\uff01"));case 14:case"end":return t.stop()}}),t,null,[[1,11]])}))),e.getParentCateList=(0,n.Z)(l().mark((function t(){var a,n;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,L().get("categories",{params:{type:2}});case 3:if(a=t.sent,200===(n=a.data).meta.status){t.next=7;break}return t.abrupt("return",f.message.error("\u83b7\u53d6\u7236\u7ea7\u5206\u7c7b\u5217\u8868\u5931\u8d25\uff01"));case 7:e.setState({parentCateList:n.data}),t.next=12;break;case 10:t.prev=10,t.t0=t.catch(0);case 12:case"end":return t.stop()}}),t,null,[[0,10]])}))),e.addCate=(0,n.Z)(l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.addCateFormRef.current.validateFields().then(function(){var t=(0,n.Z)(l().mark((function t(a){var n,r,s,c,i;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.cat_name,r=a.cat_list,s=r?r[r.length-1]:0,c=r?r.length:0,t.next=5,L().post("categories",{cat_name:n,cat_pid:s,cat_level:c});case 5:if(i=t.sent,201===i.data.meta.status){t.next=9;break}return t.abrupt("return",f.message.error("\u6dfb\u52a0\u5931\u8d25\uff01"));case 9:f.message.success("\u6dfb\u52a0\u6210\u529f\uff01"),e.setState({addCateModalVisible:!1},(function(){e.addCateFormRef.current.resetFields()})),e.getCateList();case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)}))),e.editCate=(0,n.Z)(l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.editCateFormRef.current.validateFields().then(function(){var t=(0,n.Z)(l().mark((function t(a){var n,r;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.cat_name,t.next=3,L().put("categories/".concat(e.state.editCateForm.cat_id),{cat_name:n});case 3:if(r=t.sent,200===r.data.meta.status){t.next=7;break}return t.abrupt("return",f.message.error("\u7f16\u8f91\u5931\u8d25\uff01"));case 7:f.message.success("\u7f16\u8f91\u6210\u529f\uff01"),e.setState({editCateModalVisible:!1}),e.getCateList();case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)}))),e.removeCateById=function(){var t=(0,n.Z)(l().mark((function t(a){var n;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,L().delete("categories/".concat(a));case 3:if(n=t.sent,200===n.data.meta.status){t.next=7;break}return t.abrupt("return",f.message.error("\u5220\u9664\u5931\u8d25\uff01"));case 7:f.message.success("\u5220\u9664\u6210\u529f\uff01"),e.getCateList(),t.next=13;break;case 11:t.prev=11,t.t0=t.catch(0);case 13:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}(),e}return(0,s.Z)(a,[{key:"componentDidMount",value:function(){this.getCateList()}},{key:"render",value:function(){var e=this;return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsxs)(f.Space,{direction:"vertical",style:{width:"100%"},size:"large",children:[(0,I.jsx)(f.Button,{type:"primary",onClick:this.showAddCateModal,children:"\u6dfb\u52a0\u5206\u7c7b"}),(0,I.jsx)(f.Table,{loading:this.state.loading,pagination:{position:["none"]},columns:this.columns,rowKey:function(e){return e.cat_id},dataSource:this.state.cateList,bordered:!0,rowClassName:function(e,t,a){return 0===e.cat_level?"levelOneRow":1===e.cat_level?"levelTwoRow":2===e.cat_level?"levelThreeRow":void 0},expandable:{expandIcon:function(e){var t=e.expanded,a=e.onExpand,n=e.record;return n.children?t?(0,I.jsx)(M,{onClick:function(e){return a(n,e)},className:"expandIcon"}):(0,I.jsx)(R,{onClick:function(e){return a(n,e)},className:"expandIcon"}):(0,I.jsx)(y,{className:"expandIcon"})}}}),(0,I.jsx)(f.Pagination,{total:this.state.cateTotal,current:this.state.queryInfo.pagenum,size:"large",pageSizeOptions:[1,2,5,10],defaultPageSize:this.state.queryInfo.pagesize,showSizeChanger:!0,onChange:this.onPageChange,showQuickJumper:!0,showTotal:function(e){return"\u5171 ".concat(e," \u6761")}})]}),(0,I.jsx)(f.Modal,{title:"\u6dfb\u52a0\u5206\u7c7b",visible:this.state.addCateModalVisible,onOk:this.addCate,onCancel:function(){e.addCateFormRef.current.resetFields(),e.setState({addCateModalVisible:!1})},children:(0,I.jsxs)(f.Form,{ref:this.addCateFormRef,children:[(0,I.jsx)(f.Form.Item,{name:"cat_name",label:"\u5206\u7c7b\u540d\u79f0",rules:this.addCateFormRules.cat_name,labelCol:{span:4},children:(0,I.jsx)(f.Input,{})}),(0,I.jsx)(f.Form.Item,{name:"cat_list",label:"\u7236\u7ea7\u5206\u7c7b",labelCol:{span:4},children:(0,I.jsx)(f.Cascader,{placeholder:"\u8bf7\u9009\u62e9",changeOnSelect:!0,expandTrigger:"hover",fieldNames:{label:"cat_name",value:"cat_id",children:"children"},options:this.state.parentCateList})})]})}),(0,I.jsx)(f.Modal,{title:"\u7f16\u8f91\u5206\u7c7b",visible:this.state.editCateModalVisible,onOk:this.editCate,destroyOnClose:!0,onCancel:function(){e.setState({editCateModalVisible:!1})},children:(0,I.jsx)(f.Form,{ref:this.editCateFormRef,initialValues:this.state.editCateForm,children:(0,I.jsx)(f.Form.Item,{name:"cat_name",label:"\u5206\u7c7b\u540d\u79f0",rules:this.addCateFormRules.cat_name,labelCol:{span:4},children:(0,I.jsx)(f.Input,{})})})})]})}}]),a}(d.Component)},5796:function(e,t,a){a.d(t,{Z:function(){return o}});var n=a(1413),r=a(7363),s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"},c=a(2006),i=function(e,t){return r.createElement(c.Z,(0,n.Z)((0,n.Z)({},e),{},{ref:t,icon:s}))};i.displayName="ExclamationCircleOutlined";var o=r.forwardRef(i)}}]);
//# sourceMappingURL=933.1ba326f7.chunk.js.map